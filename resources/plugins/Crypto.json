{
  "id": "Crypto",
  "meta": {
    "name": "加密货币",
    "version": "1.0.0",
    "author": "LiteMonitor",
    "description": "获取实时加密货币价格，支持所有币种，支持币种代码BTC或交易对BTCUSDT"
  },
  "inputs": [
    {
      "key": "symbol",
      "label": "币种代码",
      "type": "text",
      "default": "BTC",
      "placeholder": "BTC, ETH, SOL, DOGE",
      "scope": "target"
    },
    {
      "key": "display_mode",
      "label": "显示内容",
      "type": "select",
      "default": "percent_price",
      "scope": "target",
      "options": [
        { "label": "涨幅 + 价格 (2.5% 95000)", "value": "percent_price" },
        { "label": "价格 + 涨幅 (95000 2.5%)", "value": "price_percent" },
        { "label": "仅价格 (95000)", "value": "price" },
        { "label": "仅涨幅 (2.5%)", "value": "percent" },
        { "label": "详细 (H:96000 L:94000)", "value": "detail" }
      ]
    }
  ],
  "execution": {
    "type": "chain",
    "interval": 10,
    "steps": [
      {
        "id": "fetch_data",
        "url": "https://crypto.litemonitor.cn/?symbol={{symbol}}",
        "method": "GET",
        "response_format": "json",
        "extract": {
          "name": "name",
          "price": "price",
          "change": "change_percent",
          "high": "high",
          "low": "low",
          "vol": "vol"
        },
        "process": [
          {
            "var": "display_template",
            "source": "display_mode",
            "function": "map",
            "map": {
              "percent_price": "{{change}}%  {{price}}",
              "price_percent": "{{price}}  {{change}}%",
              "price": "{{price}}",
              "percent": "{{change}}%",
              "detail": "{{price}} H:{{high}} L:{{low}}"
            }
          },
          {
            "var": "final_display",
            "source": "display_template",
            "function": "resolve_template"
          }
        ]
      }
    ]
  },
  "outputs": [
    {
      "key": "ticker",
      "label": "{{symbol ?? name}}",
      "short_label": "{{symbol ?? name}}",
      "format_val": "{{final_display}}",
      "unit": ""
    }
  ]
}